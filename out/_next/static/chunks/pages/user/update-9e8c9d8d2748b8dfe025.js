(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[142],{8043:function(e,n,t){"use strict";t.d(n,{fh:function(){return u},q:function(){return l},IU:function(){return f},xJ:function(){return d},ej:function(){return p},sM:function(){return h},m3:function(){return m},uf:function(){return b},$D:function(){return j},gF:function(){return g},c0:function(){return x}});var r=t(4301),o=t.n(r),s=t(6808),c=t.n(s),a=t(1163),i=t(2025),u=function(e){401==e.status?(console.log("1"),b((function(){a.default.push({pathname:"/signin",query:{message:"Your session is expired. please signin."}})}))):console.log("3")},l=function(e){return o()("".concat(i.bl,"/pre-signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).catch((function(e){return e}))},f=function(e){return o()("".concat(i.bl,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).catch((function(e){return e}))},d=function(e){return o()("".concat(i.bl,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).catch((function(e){return e}))},p=function(e){return c().get(e)},h=function(e,n){localStorage.setItem(e,JSON.stringify(n))},m=function(e,n){var t,r;t="token",r=e.token,c().set(t,r,{expires:1}),h("user",e.user),n()},b=function(e){var n;return n="token",c().remove(n,{expires:1}),function(e){localStorage.removeItem(e)}("user"),e(),o()("".concat(i.bl,"/signout"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return e}))},j=function(){if(p("token"))return!!localStorage.getItem("user")&&JSON.parse(localStorage.getItem("user"))},g=function(e){return o()("".concat(i.bl,"/forgot-password"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:e})}).then((function(e){return e.json()})).catch((function(e){return e}))},x=function(e){return o()("".concat(i.bl,"/reset-password"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).catch((function(e){return e}))}},8975:function(e,n,t){"use strict";t.d(n,{Vh:function(){return u},r4:function(){return l},Ch:function(){return f},qH:function(){return d},pb:function(){return p},T7:function(){return h},zZ:function(){return m},mx:function(){return b}});var r,o=t(4301),s=t.n(o),c=t(2025),a=t(7563),i=t(8043);(0,i.$D)()&&1==(0,i.$D)().role?r="".concat(c.bl):(0,i.$D)()&&0==(0,i.$D)().role&&(r="".concat(c.bl,"/user"));var u=function(e,n){return s()("".concat(r,"/blog"),{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(n)},body:e}).then((function(e){return(0,i.fh)(e),e.json()})).catch((function(e){return e}))},l=function(e,n){var t={skip:e,limit:n};return s()("".concat(c.bl,"/blogs-catagories-tags"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).catch((function(e){return e}))},f=function(e){return s()("".concat(c.bl,"/blog/").concat(e),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return e}))},d=function(e){return s()("".concat(c.bl,"/blog/related"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).catch((function(e){return e}))},p=function(e){var n=e?"".concat(c.bl,"/").concat(e):"".concat(c.bl);return s()("".concat(n,"/blog"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return e}))},h=function(e,n){return s()("".concat(r,"/blog/").concat(e),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(n)}}).then((function(e){return(0,i.fh)(e),e.json()})).catch((function(e){return e}))},m=function(e,n,t){return s()("".concat(r,"/blog/").concat(t),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(n)},body:e}).then((function(e){return(0,i.fh)(e),e.json()})).catch((function(e){return e}))},b=function(e){var n=a.stringify(e);return s()("".concat(c.bl,"/blogs/search?").concat(n),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return e}))}},4046:function(e,n,t){"use strict";t.d(n,{k2:function(){return a},Ai:function(){return i},ck:function(){return u}});var r=t(4301),o=t.n(r),s=t(2025),c=t(8043),a=function(e){return o()("".concat(s.bl,"/user/").concat(e),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return e}))},i=function(e){return o()("".concat(s.bl,"/profile"),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return(0,c.fh)(e),e.json()})).catch((function(e){return e}))},u=function(e,n){return o()("".concat(s.bl,"/user/update"),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(e)},body:n}).then((function(e){return(0,c.fh)(e),e.json()})).catch((function(e){return e}))}},6616:function(e,n,t){"use strict";t.d(n,{Z:function(){return P}});var r=t(5893),o=t(7294),s=t(2025),c=t(1664),a=t(4865),i=t.n(a),u=t(9544),l=t(6992),f=t(5614),d=t(627),p=t(7243),h=t(3999),m=t(8008),b=t(8043),j=t(1163),g=t(6156),x=t(8975);function y(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function O(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?y(Object(t),!0).forEach((function(n){(0,g.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var v=(0,j.withRouter)((function(e){var n=e.router,t=(0,o.useState)({search:void 0,results:[],searched:!1,message:""}),s=t[0],a=t[1],i=s.search,u=s.searched,l=s.results,f=s.message;(0,o.useEffect)((function(){a(O(O({},s),{},{searched:!1,search:""}))}),[n]);var d=function(e){e.preventDefault(),(0,x.mx)({search:i}).then((function(e){a(O(O({},s),{},{results:e.blogs,searched:!0,message:"".concat(e.blogs.length," blogs found.")}))}))},p=function(e){a(O(O({},s),{},{search:e.target.value,searched:!1,result:[]}))};return(0,r.jsxs)("div",{className:"container-fluid",children:[(0,r.jsx)("div",{className:"pt-3 pb-3",children:(0,r.jsx)("form",{onSubmit:d,children:(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("div",{className:"col-md-8",children:(0,r.jsx)("input",{type:"search",className:"form-control",value:i,onChange:p,placeholder:"search blogs"})}),(0,r.jsx)("div",{className:"col-md-4",children:(0,r.jsx)("button",{className:"btn btn-outline-primary btn-block",type:"submit",children:"Search"})})]})})}),u&&(0,r.jsx)("div",{style:{marginTop:"-80px",marginBottom:"-80px"},children:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,r.jsxs)("div",{className:"jumbotron bg-white",children:[f&&(0,r.jsx)("p",{className:"pt-4 text-muted font-italic",children:f}),e.map((function(e,n){return(0,r.jsx)("div",{children:(0,r.jsx)(c.default,{href:"/blogs/".concat(e.slug),children:(0,r.jsx)("a",{className:"text-primary",children:e.title})})},n)}))]})}(l)})]})}));j.default.onRouteChangeStart=function(e){return i().start()},j.default.onRouteChangeComplete=function(e){return i().done()},j.default.onRouteChangeError=function(e){return i().done()};var N=function(e){var n=(0,o.useState)(!1),t=n[0],a=n[1];return(0,r.jsxs)(o.Fragment,{children:[(0,r.jsxs)(u.Z,{color:"light",light:!0,expand:"md",children:[(0,r.jsx)(c.default,{href:"/",children:(0,r.jsx)(l.Z,{className:"font-weight-bold",style:{cursor:"pointer"},children:s.iC})}),(0,r.jsx)(f.Z,{onClick:function(){return a(!t)}}),(0,r.jsx)(d.Z,{isOpen:t,navbar:!0,children:(0,r.jsxs)(p.Z,{className:"ml-auto",navbar:!0,children:[(0,r.jsx)(h.Z,{children:(0,r.jsx)(c.default,{href:"/blogs",children:(0,r.jsx)(m.Z,{style:{cursor:"pointer"},children:"blogs"})})}),(0,r.jsx)(h.Z,{children:(0,r.jsx)(c.default,{href:"/Contact",children:(0,r.jsx)(m.Z,{style:{cursor:"pointer"},children:"Contact"})})}),!(0,b.$D)()&&(0,r.jsxs)(o.Fragment,{children:[(0,r.jsx)(h.Z,{children:(0,r.jsx)(c.default,{href:"/signin",children:(0,r.jsx)(m.Z,{style:{cursor:"pointer"},children:"signin"})})}),(0,r.jsx)(h.Z,{children:(0,r.jsx)(c.default,{href:"/signup",children:(0,r.jsx)(m.Z,{style:{cursor:"pointer"},children:"signup"})})})]}),(0,b.$D)()&&1==(0,b.$D)().role&&(0,r.jsx)(h.Z,{children:(0,r.jsx)(c.default,{href:"/admin",children:(0,r.jsx)(m.Z,{style:{cursor:"pointer"},children:"".concat((0,b.$D)().name,"'s Dashboard")})})}),(0,b.$D)()&&0==(0,b.$D)().role&&(0,r.jsx)(h.Z,{children:(0,r.jsx)(c.default,{href:"/user",children:(0,r.jsx)(m.Z,{style:{cursor:"pointer"},children:"".concat((0,b.$D)().name,"'s Dashboard")})})}),(0,b.$D)()&&(0,r.jsx)(h.Z,{children:(0,r.jsx)(m.Z,{onClick:function(){(0,b.uf)((function(){j.default.replace("/signin")}))},style:{cursor:"pointer"},children:"signout"})})]})})]}),(0,r.jsx)(v,{})]})},P=function(e){var n=e.children;return(0,r.jsxs)(o.Fragment,{children:[(0,r.jsx)(N,{}),n]})}},2025:function(e,n,t){"use strict";t.d(n,{bl:function(){return r},yK:function(){return o},iC:function(){return s},CT:function(){return c}});var r="https://quest-blog.herokuapp.com/api",o="http://localhost:3000",s="SEOBLOG",c="blog-7690exkuju"},4573:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return m}});var r=t(5893),o=t(6156),s=(t(1664),t(1163),t(7294)),c=t(6955),a=t(3686),i=t(8043),u=t(4046),l=t(2025);function f(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function d(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?f(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var p=function(){var e=(0,s.useState)({username:"",name:"",password:"",email:"",about:"",error:!1,success:!1,loading:!1,photo:"",userData:""}),n=e[0],t=e[1],f=(0,i.ej)("token"),p=(0,s.useState)(!0),h=p[0],m=p[1],b=function(){m(!1)},j=n.userData,g=n.username,x=n.name,y=n.password,O=n.email,v=n.error,N=n.success,P=n.loading,w=n.photo,C=n.about;(0,s.useEffect)((function(){T()}),[]);var T=function(){return(0,u.Ai)(f).then((function(e){e.err?t(d(d({},n),{},{error:e.err})):t(d(d({},n),{},{username:e.user.username,email:e.user.email,photo:e.user.photo?e.user.photo:"",name:e.user.name,about:e.user.about}))}))},Z=function(e){return function(r){var s,c="photo"==e?r.target.files[0]:r.target.value,a=new FormData;a.set(e,c),"password"!=e&&(""!=y&&a.set("password",y)),"password"==e&&""==c&&a.delete("password"),t(d(d({},n),{},(s={},(0,o.Z)(s,e,c),(0,o.Z)(s,"userData",a),(0,o.Z)(s,"error",!1),(0,o.Z)(s,"success",!1),s)))}},D=function(e){e.preventDefault(),t(d(d({},n),{},{loading:!0})),(0,u.ck)(f,j).then((function(e){e.user?(m(!0),t(d(d({},n),{},{username:e.user.username,email:e.user.email,name:e.user.name,about:e.user.about,loading:!1,success:!0})),(0,i.sM)("user",e.user)):(m(!0),t(d(d({},n),{},{error:e.err,success:!1,loading:!1})))}))};return(0,r.jsx)(s.Fragment,{children:(0,r.jsx)("div",{className:"container",children:(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("div",{className:"col-md-4",children:w&&(0,r.jsx)("img",{src:"".concat(l.bl,"/user/photo/").concat((0,i.$D)()&&(0,i.$D)().username),alt:"user profile",style:{borderRadius:"50%",maxHeight:"auto",width:"100%"},className:"img img-fluid mb-3"})}),(0,r.jsxs)("div",{className:"col-md-8 mb-5",children:[v?(0,r.jsx)(a.Z,{color:"danger",isOpen:h,toggle:b,children:v}):"",N?(0,r.jsx)(a.Z,{color:"success",isOpen:h,toggle:b,children:"Profile updated."}):"",(0,r.jsxs)("form",{onSubmit:D,children:[(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"text-muted",children:"Profile Photo"}),(0,r.jsx)("br",{}),(0,r.jsxs)("label",{className:"btn btn-outline-info",children:["Select Photo",(0,r.jsx)("input",{type:"file",accept:"image/*",hidden:!0,onChange:Z("photo")})]})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"text-muted",children:"Username"}),(0,r.jsx)("input",{type:"text",className:"form-control",value:g,onChange:Z("username")})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"text-muted",children:"Name"}),(0,r.jsx)("input",{type:"text",className:"form-control",value:x,onChange:Z("name")})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"text-muted",children:"Email"}),(0,r.jsx)("input",{type:"email",className:"form-control",value:O,onChange:Z("email")})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"text-muted",children:"About"}),(0,r.jsx)("textarea",{type:"text",className:"form-control",value:C,onChange:Z("about")})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"text-muted",children:"Password"}),(0,r.jsx)("input",{type:"password",className:"form-control",value:y,onChange:Z("password")})]}),(0,r.jsxs)("button",{type:"submit",className:"btn btn-primary",children:["Submit",P&&(0,r.jsx)(c.Z,{size:"sm",className:"ml-1",color:"light"})]})]})]})]})})})},h=t(6616),m=function(){return(0,r.jsx)(h.Z,{children:(0,r.jsx)("div",{className:"container-fluid",children:(0,r.jsx)("div",{className:"row",children:(0,r.jsx)(p,{})})})})}},8130:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/update",function(){return t(4573)}])},3686:function(e,n,t){"use strict";t.d(n,{Z:function(){return P}});var r=t(2122),o=t(9756),s=t(6156),c=t(7294),a=t(5697),i=t.n(a),u=t(4184),l=t.n(u),f=t(3663),d=t(4317);function p(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function h(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?p(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var m=h(h({},d.Transition.propTypes),{},{children:i().oneOfType([i().arrayOf(i().node),i().node]),tag:f.iC,baseClass:i().string,baseClassActive:i().string,className:i().string,cssModule:i().object,innerRef:i().oneOfType([i().object,i().string,i().func])}),b=h(h({},d.Transition.defaultProps),{},{tag:"div",baseClass:"fade",baseClassActive:"show",timeout:f.wF.Fade,appear:!0,enter:!0,exit:!0,in:!0});function j(e){var n=e.tag,t=e.baseClass,s=e.baseClassActive,a=e.className,i=e.cssModule,u=e.children,p=e.innerRef,h=(0,o.Z)(e,["tag","baseClass","baseClassActive","className","cssModule","children","innerRef"]),m=(0,f.ei)(h,f.rb),b=(0,f.CE)(h,f.rb);return c.createElement(d.Transition,m,(function(e){var o="entered"===e,d=(0,f.mx)(l()(a,t,o&&s),i);return c.createElement(n,(0,r.Z)({className:d},b,{ref:p}),u)}))}j.propTypes=m,j.defaultProps=b;var g=j;function x(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function y(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?x(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):x(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var O={children:i().node,className:i().string,closeClassName:i().string,closeAriaLabel:i().string,cssModule:i().object,color:i().string,fade:i().bool,isOpen:i().bool,toggle:i().func,tag:f.iC,transition:i().shape(g.propTypes),innerRef:i().oneOfType([i().object,i().string,i().func])},v={color:"success",isOpen:!0,tag:"div",closeAriaLabel:"Close",fade:!0,transition:y(y({},g.defaultProps),{},{unmountOnExit:!0})};function N(e){var n=e.className,t=e.closeClassName,s=e.closeAriaLabel,a=e.cssModule,i=e.tag,u=e.color,d=e.isOpen,p=e.toggle,h=e.children,m=e.transition,b=e.fade,j=e.innerRef,x=(0,o.Z)(e,["className","closeClassName","closeAriaLabel","cssModule","tag","color","isOpen","toggle","children","transition","fade","innerRef"]),O=(0,f.mx)(l()(n,"alert","alert-"+u,{"alert-dismissible":p}),a),v=(0,f.mx)(l()("close",t),a),N=y(y(y({},g.defaultProps),m),{},{baseClass:b?m.baseClass:"",timeout:b?m.timeout:0});return c.createElement(g,(0,r.Z)({},x,N,{tag:i,className:O,in:d,role:"alert",innerRef:j}),p?c.createElement("button",{type:"button",className:v,"aria-label":s,onClick:p},c.createElement("span",{"aria-hidden":"true"},"\xd7")):null,h)}N.propTypes=O,N.defaultProps=v;var P=N},6955:function(e,n,t){"use strict";var r=t(2122),o=t(9756),s=t(7294),c=t(5697),a=t.n(c),i=t(4184),u=t.n(i),l=t(3663),f={tag:l.iC,type:a().string,size:a().string,color:a().string,className:a().string,cssModule:a().object,children:a().string},d=function(e){var n=e.className,t=e.cssModule,c=e.type,a=e.size,i=e.color,f=e.children,d=e.tag,p=(0,o.Z)(e,["className","cssModule","type","size","color","children","tag"]),h=(0,l.mx)(u()(n,!!a&&"spinner-"+c+"-"+a,"spinner-"+c,!!i&&"text-"+i),t);return s.createElement(d,(0,r.Z)({role:"status"},p,{className:h}),f&&s.createElement("span",{className:(0,l.mx)("sr-only",t)},f))};d.propTypes=f,d.defaultProps={tag:"div",type:"border",children:"Loading..."},n.Z=d}},function(e){e.O(0,[774,769,888,179],(function(){return n=8130,e(e.s=n);var n}));var n=e.O();_N_E=n}]);