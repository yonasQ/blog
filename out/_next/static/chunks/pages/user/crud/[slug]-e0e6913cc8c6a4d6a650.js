_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[33],{"/XFM":function(e,t,r){"use strict";var c=r("nKUr"),n=r("20a2"),s=r.n(n),a=r("q1tI"),i=r.n(a),o=r("iuBY");t.a=function(e){var t=e.children;return Object(a.useEffect)((function(){Object(o.d)()||s.a.push("/signin")}),[]),Object(c.jsx)(i.a.Fragment,{children:t})}},"0iGR":function(e,t,r){"use strict";r.r(t);var c=r("nKUr"),n=r("ezhv"),s=r("/XFM"),a=r("lepP");t.default=function(){return Object(c.jsx)(n.a,{children:Object(c.jsx)(s.a,{children:Object(c.jsx)("div",{className:"container-fluid",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-md-12 pt-5 pb-5",children:Object(c.jsx)("h1",{children:"Update blog"})}),Object(c.jsx)("div",{className:"col-md-12",children:Object(c.jsx)(a.a,{})})]})})})})}},SmLR:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/crud/[slug]",function(){return r("0iGR")}])},WjD0:function(e,t){e.exports="object"==typeof self?self.FormData:window.FormData},lepP:function(e,t,r){"use strict";var c=r("nKUr"),n=r("KQm4"),s=r("o0o1"),a=r.n(s);function i(e,t,r,c,n,s,a){try{var i=e[s](a),o=i.value}catch(l){return void r(l)}i.done?t(o):Promise.resolve(o).then(c,n)}var o=r("rePB"),l=r("q1tI"),u=r.n(l),j=r("20a2"),b=r("Vvt1"),d=r.n(b),f=r("iuBY"),O=(r("91UR"),r("/P0P")),m=r("SMr6"),h=r("zycw"),p=r("//g3"),x=r("obyI"),g=r("WjD0"),v=r.n(g),y=r("aLZG");function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,c)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){Object(o.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var P=d()((function(){return Promise.all([r.e(0),r.e(10),r.e(6),r.e(11)]).then(r.t.bind(null,"rmP6",7))}),{ssr:!1,loadableGenerated:{webpack:function(){return["rmP6"]},modules:["..\\component\\crud\\BlogUpdate.js -> react-quill"]}});t.a=Object(j.withRouter)((function(e){var t=e.router,r=Object(l.useState)(""),s=r[0],j=r[1],b=Object(l.useState)({title:"",error:"",formData:"",success:""}),d=b[0],g=b[1],w=Object(l.useState)({}),_=w[0],D=w[1],S=Object(l.useState)([]),k=S[0],E=S[1],F=Object(l.useState)([]),U=F[0],q=F[1],C=Object(l.useState)([]),R=C[0],B=C[1],G=Object(l.useState)([]),K=G[0],T=G[1];Object(l.useEffect)((function(){g(N(N({},d),{},{formData:new v.a})),Q(),V(),Z()}),[t]);var X=Object(l.useState)(!0),Y=X[0],z=X[1],I=d.title,J=d.error,L=d.success,M=d.formData,H=function(){if(J)z(!1);else{if(f.d&&0===Object(f.d)().role)return t.replace("/user");if(f.d&&1===Object(f.d)().role)return t.replace("/admin")}},W=Object(f.c)("token"),Q=function(){var e,r=(e=a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.query.slug){e.next=3;break}return e.next=3,Object(h.g)(t.query.slug).then((function(e){e.err?console.log(e.err):(D(e.blog),g(N(N({},d),{},{title:e.blog?e.blog.title:""})),j(e.blog?e.blog.body:""),B(e.blog.tags.map((function(e){return e._id}))),T(e.blog.catagories.map((function(e){return e._id}))))}));case 3:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(c,n){var s=e.apply(t,r);function a(e){i(s,c,n,a,o,"next",e)}function o(e){i(s,c,n,a,o,"throw",e)}a(void 0)}))});return function(){return r.apply(this,arguments)}}(),V=function(){Object(O.b)().then((function(e){e.err?g(N(N({},d),{},{err:e.err})):E(e.catagories)}))},Z=function(){Object(m.c)().then((function(e){e.err?g(N(N({},d),{},{err:e.err})):q(e.tags)}))},A=new v.a,$=function(e){return function(t){var r,c="photo"==e?t.target.files[0]:t.target.value;A.set(e,c),g(N(N({},d),{},(r={},Object(o.a)(r,e,c),Object(o.a)(r,"formData",A),Object(o.a)(r,"error",!1),r)))}},ee=function(e){j(e),A.set("body",e),g(N(N({},d),{},{formData:A,error:!1}))},te=function(e){return function(){var t=R.indexOf(e),r=Object(n.a)(R);-1===t?r.push(e):r.splice(t,1),B(r),A.set("tags",r),g(N(N({},d),{},{formData:A,error:!1}))}},re=function(e){return function(){var t=K.indexOf(e),r=Object(n.a)(K);-1===t?r.push(e):r.splice(t,1),T(r),A.set("catagories",r),g(N(N({},d),{},{formData:A,error:!1}))}},ce=function(e){e.preventDefault(),Object(h.h)(M,W,t.query.slug).then((function(e){e.err?(z(!0),g(N(N({},d),{},{success:"",error:e.err}))):(z(!0),g(N(N({},d),{},{error:"",success:'Blog titled "'.concat(e.response.title,'" is successfully updated')})))}))};return Object(c.jsx)(u.a.Fragment,{children:Object(c.jsxs)("div",{className:"container-fluid pb-5",children:[Object(c.jsx)("div",{className:"row",children:Object(c.jsxs)("div",{className:"mb-3 col-md-8 ",children:[J?Object(c.jsx)(y.a,{color:"danger",isOpen:Y,toggle:H,children:J}):"",L?Object(c.jsx)(y.a,{color:"success",isOpen:Y,toggle:H,children:L}):""]})}),Object(c.jsxs)("div",{className:"row",children:[Object(c.jsxs)("div",{className:"col-md-8",children:[Object(c.jsxs)("form",{method:"post",onSubmit:ce,children:[Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{className:"text-muted",children:"Title"}),Object(c.jsx)("input",{type:"text",onChange:$("title"),value:I,className:"form-control"})]}),Object(c.jsx)("div",{className:"form-group",children:Object(c.jsx)(P,{modules:p.b,formats:p.a,value:s,placeholder:"what's on your mind",onChange:ee})}),Object(c.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Update"})]}),JSON.stringify(_.photo)?Object(c.jsxs)("div",{children:[Object(c.jsx)("h4",{className:"pt-5 pb-3 mb-0 font-weight-light",children:"Featured image"}),Object(c.jsx)("img",{style:{width:"100%"},src:"".concat(x.a,"/blog/photo/").concat(_.slug),alt:"".concat(_.title),className:" img img-fluid featured-image"})]}):""]}),Object(c.jsxs)("div",{className:"col-md-4",children:[Object(c.jsx)("div",{children:Object(c.jsxs)("div",{className:"form-group pb-2",children:[Object(c.jsx)("h5",{children:"Featured image"}),Object(c.jsx)("hr",{}),Object(c.jsx)("small",{className:"text-muted",children:"max size: 1mb"}),Object(c.jsx)("br",{}),Object(c.jsxs)("label",{className:"btn btn-outline-info",children:["Upload featured image",Object(c.jsx)("input",{onChange:$("photo"),type:"file",accept:"image/*",hidden:!0})]})]})}),Object(c.jsxs)("div",{children:[Object(c.jsx)("h5",{children:"Catagories"}),Object(c.jsx)("hr",{}),Object(c.jsxs)("ul",{style:{maxHeight:"200px",overflowY:"scroll"},children:[" ",k&&k.map((function(e,t){return Object(c.jsxs)("li",{className:"list-unstyled",children:[Object(c.jsx)("input",{onChange:re(e._id),checked:(r=e._id,-1!=K.indexOf(r)),type:"checkbox",className:"mr-2"}),Object(c.jsx)("label",{className:"form-check-label",children:e.name})]},t);var r}))]})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("h5",{children:"Tags"}),Object(c.jsx)("hr",{}),Object(c.jsxs)("ul",{style:{maxHeight:"200px",overflowY:"scroll"},children:[" ",U.map((function(e,t){return Object(c.jsxs)("li",{className:"list-unstyled",children:[Object(c.jsx)("input",{onChange:te(e._id),checked:(r=e._id,-1!=R.indexOf(r)),type:"checkbox",className:"mr-2"}),Object(c.jsx)("label",{className:"form-check-label",children:e.name})]},t);var r}))]})]})]})]})]})})}))}},[["SmLR",1,0,2,3,8,9]]]);