_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[33],{"/XFM":function(e,t,c){"use strict";var r=c("nKUr"),n=c("20a2"),s=c.n(n),a=c("q1tI"),i=c.n(a),o=c("iuBY");t.a=function(e){var t=e.children;return Object(a.useEffect)((function(){Object(o.d)()||s.a.push("/signin")}),[]),Object(r.jsx)(i.a.Fragment,{children:t})}},"0iGR":function(e,t,c){"use strict";c.r(t);var r=c("nKUr"),n=c("ezhv"),s=c("/XFM"),a=c("lepP");t.default=function(){return Object(r.jsx)(n.a,{children:Object(r.jsx)(s.a,{children:Object(r.jsx)("div",{className:"container-fluid",children:Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)("div",{className:"col-md-12 pt-5 pb-5",children:Object(r.jsx)("h1",{children:"Update blog"})}),Object(r.jsx)("div",{className:"col-md-12 pb-5",children:Object(r.jsx)(a.a,{})})]})})})})}},"HaE+":function(e,t,c){"use strict";function r(e,t,c,r,n,s,a){try{var i=e[s](a),o=i.value}catch(l){return void c(l)}i.done?t(o):Promise.resolve(o).then(r,n)}function n(e){return function(){var t=this,c=arguments;return new Promise((function(n,s){var a=e.apply(t,c);function i(e){r(a,n,s,i,o,"next",e)}function o(e){r(a,n,s,i,o,"throw",e)}i(void 0)}))}}c.d(t,"a",(function(){return n}))},SmLR:function(e,t,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/crud/[slug]",function(){return c("0iGR")}])},WjD0:function(e,t){e.exports="object"==typeof self?self.FormData:window.FormData},lepP:function(e,t,c){"use strict";var r=c("nKUr"),n=c("KQm4"),s=c("o0o1"),a=c.n(s),i=c("HaE+"),o=c("rePB"),l=c("q1tI"),u=c.n(l),j=c("20a2"),b=c("Vvt1"),d=c.n(b),f=c("iuBY"),O=(c("91UR"),c("/P0P")),m=c("SMr6"),h=c("zycw"),p=c("//g3"),x=c("obyI"),g=c("WjD0"),v=c.n(g),y=c("aLZG");function w(e,t){var c=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),c.push.apply(c,r)}return c}function N(e){for(var t=1;t<arguments.length;t++){var c=null!=arguments[t]?arguments[t]:{};t%2?w(Object(c),!0).forEach((function(t){Object(o.a)(e,t,c[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(c)):w(Object(c)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(c,t))}))}return e}var P=d()((function(){return Promise.all([c.e(0),c.e(10),c.e(6),c.e(11)]).then(c.t.bind(null,"rmP6",7))}),{ssr:!1,loadableGenerated:{webpack:function(){return["rmP6"]},modules:["..\\component\\crud\\BlogUpdate.js -> react-quill"]}});t.a=Object(j.withRouter)((function(e){var t=e.router,c=Object(l.useState)(""),s=c[0],j=c[1],b=Object(l.useState)({title:"",error:"",formData:"",success:""}),d=b[0],g=b[1],w=Object(l.useState)({}),_=w[0],D=w[1],S=Object(l.useState)([]),k=S[0],E=S[1],F=Object(l.useState)([]),U=F[0],q=F[1],C=Object(l.useState)([]),R=C[0],B=C[1],G=Object(l.useState)([]),H=G[0],K=G[1];Object(l.useEffect)((function(){g(N(N({},d),{},{formData:new v.a})),Q(),V(),Z()}),[t]);var T=Object(l.useState)(!0),X=T[0],Y=T[1],z=d.title,I=d.error,J=d.success,L=d.formData,M=function(){if(I)Y(!1);else{if(f.d&&0===Object(f.d)().role)return t.replace("/user");if(f.d&&1===Object(f.d)().role)return t.replace("/admin")}},W=Object(f.c)("token"),Q=function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.query.slug){e.next=3;break}return e.next=3,Object(h.g)(t.query.slug).then((function(e){e.err?console.log(e.err):(D(e.blog),g(N(N({},d),{},{title:e.blog?e.blog.title:""})),j(e.blog?e.blog.body:""),B(e.blog.tags.map((function(e){return e._id}))),K(e.blog.catagories.map((function(e){return e._id}))))}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){Object(O.b)().then((function(e){e.err?g(N(N({},d),{},{err:e.err})):E(e.catagories)}))},Z=function(){Object(m.c)().then((function(e){e.err?g(N(N({},d),{},{err:e.err})):q(e.tags)}))},A=new v.a,$=function(e){return function(t){var c,r="photo"==e?t.target.files[0]:t.target.value;A.set(e,r),g(N(N({},d),{},(c={},Object(o.a)(c,e,r),Object(o.a)(c,"formData",A),Object(o.a)(c,"error",!1),c)))}},ee=function(e){j(e),A.set("body",e),g(N(N({},d),{},{formData:A,error:!1}))},te=function(e){return function(){var t=R.indexOf(e),c=Object(n.a)(R);-1===t?c.push(e):c.splice(t,1),B(c),A.set("tags",c),g(N(N({},d),{},{formData:A,error:!1}))}},ce=function(e){return function(){var t=H.indexOf(e),c=Object(n.a)(H);-1===t?c.push(e):c.splice(t,1),K(c),A.set("catagories",c),g(N(N({},d),{},{formData:A,error:!1}))}},re=function(e){e.preventDefault(),Object(h.h)(L,W,t.query.slug).then((function(e){e.err?(Y(!0),g(N(N({},d),{},{success:"",error:e.err}))):(Y(!0),g(N(N({},d),{},{error:"",success:'Blog titled "'.concat(e.response.title,'" is successfully updated')})))}))};return Object(r.jsx)(u.a.Fragment,{children:Object(r.jsxs)("div",{className:"container-fluid pb-5",children:[Object(r.jsx)("div",{className:"row",children:Object(r.jsxs)("div",{className:"mb-3 col-md-8 ",children:[I?Object(r.jsx)(y.a,{color:"danger",isOpen:X,toggle:M,children:I}):"",J?Object(r.jsx)(y.a,{color:"success",isOpen:X,toggle:M,children:J}):""]})}),Object(r.jsxs)("div",{className:"row",children:[Object(r.jsxs)("div",{className:"col-md-8",children:[Object(r.jsxs)("form",{method:"post",onSubmit:re,children:[Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("label",{className:"text-muted",children:"Title"}),Object(r.jsx)("input",{type:"text",onChange:$("title"),value:z,className:"form-control"})]}),Object(r.jsx)("div",{className:"form-group",children:Object(r.jsx)(P,{modules:p.b,formats:p.a,value:s,placeholder:"what's on your mind",onChange:ee})}),Object(r.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Update"})]}),JSON.stringify(_.photo)?Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{className:"pt-5 pb-3 mb-0 font-weight-light",children:"Featured image"}),Object(r.jsx)("img",{style:{width:"100%"},src:"".concat(x.a,"/blog/photo/").concat(_.slug),alt:"".concat(_.title),className:" img img-fluid featured-image"})]}):""]}),Object(r.jsxs)("div",{className:"col-md-4",children:[Object(r.jsx)("div",{children:Object(r.jsxs)("div",{className:"form-group pb-2",children:[Object(r.jsx)("h5",{children:"Featured image"}),Object(r.jsx)("hr",{}),Object(r.jsx)("small",{className:"text-muted",children:"max size: 1mb"}),Object(r.jsx)("br",{}),Object(r.jsxs)("label",{className:"btn btn-outline-info",children:["Upload featured image",Object(r.jsx)("input",{onChange:$("photo"),type:"file",accept:"image/*",hidden:!0})]})]})}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h5",{children:"Catagories"}),Object(r.jsx)("hr",{}),Object(r.jsxs)("ul",{style:{maxHeight:"200px",overflowY:"scroll"},children:[" ",k&&k.map((function(e,t){return Object(r.jsxs)("li",{className:"list-unstyled",children:[Object(r.jsx)("input",{onChange:ce(e._id),checked:(c=e._id,-1!=H.indexOf(c)),type:"checkbox",className:"mr-2"}),Object(r.jsx)("label",{className:"form-check-label",children:e.name})]},t);var c}))]})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h5",{children:"Tags"}),Object(r.jsx)("hr",{}),Object(r.jsxs)("ul",{style:{maxHeight:"200px",overflowY:"scroll"},children:[" ",U.map((function(e,t){return Object(r.jsxs)("li",{className:"list-unstyled",children:[Object(r.jsx)("input",{onChange:te(e._id),checked:(c=e._id,-1!=R.indexOf(c)),type:"checkbox",className:"mr-2"}),Object(r.jsx)("label",{className:"form-check-label",children:e.name})]},t);var c}))]})]})]})]})]})})}))}},[["SmLR",1,0,2,3,8,9]]]);